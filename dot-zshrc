# Minimal, fast defaults
export ZDOTDIR="$HOME"
export HISTFILE="$HOME/.zsh_history"
export SAVEHIST=5000
export HISTSIZE=5000
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_FIND_NO_DUPS
setopt SHARE_HISTORY
setopt AUTO_CD
setopt CORRECT

# Prompt
# Starship prompt (guard if missing)
if command -v starship >/dev/null 2>&1; then
  export STARSHIP_CONFIG="$HOME/.config/starship.toml"
  eval "$(starship init zsh)"
fi

# Set default directory to app folder (only if starting from home)
if [ "$PWD" = "$HOME" ]; then
    mkdir -p ~/app
    cd ~/app
fi

# asdf env for non-login zsh
[[ -f /etc/profile.d/asdf.sh ]] && . /etc/profile.d/asdf.sh
# enable zsh completions (picks up _asdf from /usr/share/zsh/site-functions)
autoload -Uz compinit && compinit -i

# For UV Python
export PATH="$HOME/.local/bin:$PATH"

# Common aliases
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'

# Git aliases
alias gs='git status'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git log --oneline'
alias gd='git diff'
alias lg='git lg'
alias gundo='git reset --soft HEAD~1'

# Phoenix development aliases
alias phx="mix phx.server"
alias phxd="MIX_ENV=dev mix phx.server"
alias phxt="MIX_ENV=test mix test"
alias ecto="mix ecto"
alias iex="iex -S mix"

# Database shortcuts
alias db.create="mix ecto.create"
alias db.migrate="mix ecto.migrate"
alias db.reset="mix ecto.reset"
alias db.seed="mix ecto.seed"
